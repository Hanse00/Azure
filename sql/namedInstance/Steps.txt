1. Deploy a SQL Server VM from Azure Marketplace :: portal or template deployment

2. Uninstall the IaaS extension from the Azure portal :: use a deployment script to uninstall the extension
https://docs.microsoft.com/en-us/azure/templates/microsoft.resources/deploymentscripts
https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/template-tutorial-deployment-script

3. Uninstall SQL Server completely within the SQL Server VM :: use the cmdline tool in conjunction with the custom script extension
https://www.sqlservercentral.com/blogs/uninstalling-sql-server-from-the-command-line-to-remove-unwanted-background-instances

4. Install SQL Server with a named instance within the SQL Server VM  :: use DSC to first reboot the server then install SQL; 
https://docs.microsoft.com/en-us/powershell/scripting/dsc/configurations/reboot-a-node?view=powershell-7
https://docs.microsoft.com/en-us/sql/database-engine/install-windows/install-sql-server-with-powershell-desired-state-configuration?view=sql-server-ver15
https://github.com/dsccommunity/SqlServerDsc/wiki/SqlSetup

5. Install the IaaS extension from the Azure portal  :: possibly use Azure Automation to check for SQL install presence on VM's without extension and add extension